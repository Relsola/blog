<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>React Router | Relsola</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/blog/icon.png">
    <meta name="description" content="Relsola的个人博客">
    
    <link rel="preload" href="/blog/assets/css/0.styles.012201c4.css" as="style"><link rel="preload" href="/blog/assets/js/app.9d83514e.js" as="script"><link rel="preload" href="/blog/assets/js/3.2bfcb39e.js" as="script"><link rel="preload" href="/blog/assets/js/2.f8d1e681.js" as="script"><link rel="preload" href="/blog/assets/js/40.6de3452b.js" as="script"><link rel="prefetch" href="/blog/assets/js/1.9e27f4a0.js"><link rel="prefetch" href="/blog/assets/js/12.7e8032ad.js"><link rel="prefetch" href="/blog/assets/js/13.158b3f59.js"><link rel="prefetch" href="/blog/assets/js/14.d1c718f7.js"><link rel="prefetch" href="/blog/assets/js/15.72da6b94.js"><link rel="prefetch" href="/blog/assets/js/16.502ca131.js"><link rel="prefetch" href="/blog/assets/js/17.ef970fce.js"><link rel="prefetch" href="/blog/assets/js/18.e6430c27.js"><link rel="prefetch" href="/blog/assets/js/19.668d8df3.js"><link rel="prefetch" href="/blog/assets/js/20.a3383c57.js"><link rel="prefetch" href="/blog/assets/js/21.1dc2c107.js"><link rel="prefetch" href="/blog/assets/js/22.b8c34b6d.js"><link rel="prefetch" href="/blog/assets/js/23.8e46c7b8.js"><link rel="prefetch" href="/blog/assets/js/24.c22ba5b4.js"><link rel="prefetch" href="/blog/assets/js/25.9afca29d.js"><link rel="prefetch" href="/blog/assets/js/26.80639085.js"><link rel="prefetch" href="/blog/assets/js/27.86314ca6.js"><link rel="prefetch" href="/blog/assets/js/28.20556cf5.js"><link rel="prefetch" href="/blog/assets/js/29.520ad0ce.js"><link rel="prefetch" href="/blog/assets/js/30.b714af82.js"><link rel="prefetch" href="/blog/assets/js/31.be156efe.js"><link rel="prefetch" href="/blog/assets/js/32.94d700e9.js"><link rel="prefetch" href="/blog/assets/js/33.7fb3899f.js"><link rel="prefetch" href="/blog/assets/js/34.01a8f013.js"><link rel="prefetch" href="/blog/assets/js/35.c67e5486.js"><link rel="prefetch" href="/blog/assets/js/36.bff15858.js"><link rel="prefetch" href="/blog/assets/js/37.928986f0.js"><link rel="prefetch" href="/blog/assets/js/38.66670f06.js"><link rel="prefetch" href="/blog/assets/js/39.d86d46f3.js"><link rel="prefetch" href="/blog/assets/js/4.83140480.js"><link rel="prefetch" href="/blog/assets/js/41.ffb83818.js"><link rel="prefetch" href="/blog/assets/js/42.5454a3e5.js"><link rel="prefetch" href="/blog/assets/js/43.13f3f59a.js"><link rel="prefetch" href="/blog/assets/js/44.9a3ba2f9.js"><link rel="prefetch" href="/blog/assets/js/45.2565350e.js"><link rel="prefetch" href="/blog/assets/js/46.5395fc52.js"><link rel="prefetch" href="/blog/assets/js/47.3a789d60.js"><link rel="prefetch" href="/blog/assets/js/48.480d2355.js"><link rel="prefetch" href="/blog/assets/js/49.ab9e150b.js"><link rel="prefetch" href="/blog/assets/js/5.b1bdaea3.js"><link rel="prefetch" href="/blog/assets/js/50.2b5a4bc6.js"><link rel="prefetch" href="/blog/assets/js/51.730b03a8.js"><link rel="prefetch" href="/blog/assets/js/52.5ae5e96c.js"><link rel="prefetch" href="/blog/assets/js/53.84fa08a6.js"><link rel="prefetch" href="/blog/assets/js/54.30982389.js"><link rel="prefetch" href="/blog/assets/js/55.53af650a.js"><link rel="prefetch" href="/blog/assets/js/56.fe6bc56f.js"><link rel="prefetch" href="/blog/assets/js/6.23e3258d.js"><link rel="prefetch" href="/blog/assets/js/7.7aab24a7.js"><link rel="prefetch" href="/blog/assets/js/8.9591912a.js"><link rel="prefetch" href="/blog/assets/js/9.3075e6e8.js"><link rel="prefetch" href="/blog/assets/js/vendors~docsearch.71c080bd.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.012201c4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">Relsola</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript" class="dropdown-title"><span class="title">JavaScript</span> <span class="arrow down"></span></button> <button type="button" aria-label="JavaScript" class="mobile-dropdown-title"><span class="title">JavaScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/JavaScript/base.html" class="nav-link">
  深入理解解JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/blog/JavaScript/es6.html" class="nav-link">
  深入理解ES6
</a></li><li class="dropdown-item"><!----> <a href="/blog/JavaScript/handwrite.html" class="nav-link">
  JavaScript手写系列
</a></li><li class="dropdown-item"><!----> <a href="/blog/JavaScript/designPattern.html" class="nav-link">
  JavaScript设计模式
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue" class="dropdown-title"><span class="title">Vue</span> <span class="arrow down"></span></button> <button type="button" aria-label="Vue" class="mobile-dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/vue/vue2base.html" class="nav-link">
  Vue2基础
</a></li><li class="dropdown-item"><!----> <a href="/blog/vue/libraries.html" class="nav-link">
  Vue核心插件
</a></li><li class="dropdown-item"><!----> <a href="/blog/vue/vue2sourceCode.html" class="nav-link">
  Vue2源码解读
</a></li><li class="dropdown-item"><!----> <a href="/blog/vue/vue3sourceCode.html" class="nav-link">
  Vue3源码解读
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="React" class="dropdown-title"><span class="title">React</span> <span class="arrow down"></span></button> <button type="button" aria-label="React" class="mobile-dropdown-title"><span class="title">React</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/react/base.html" class="nav-link">
  React基础
</a></li><li class="dropdown-item"><!----> <a href="/blog/react/router.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  React路由
</a></li><li class="dropdown-item"><!----> <a href="/blog/react/redux.html" class="nav-link">
  Redux
</a></li><li class="dropdown-item"><!----> <a href="/blog/react/sourceCode.html" class="nav-link">
  React源码
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端工程化" class="dropdown-title"><span class="title">前端工程化</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端工程化" class="mobile-dropdown-title"><span class="title">前端工程化</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/project/webpack.html" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/blog/project/vite.html" class="nav-link">
  Vite
</a></li><li class="dropdown-item"><!----> <a href="/blog/project/rollup.html" class="nav-link">
  Rollup
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="TypeScript" class="dropdown-title"><span class="title">TypeScript</span> <span class="arrow down"></span></button> <button type="button" aria-label="TypeScript" class="mobile-dropdown-title"><span class="title">TypeScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/typescript/base.html" class="nav-link">
  TypeScript基础
</a></li><li class="dropdown-item"><!----> <a href="/blog/typescript/challenge.html" class="nav-link">
  TypeScript类型体操
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="CSS预编译器" class="dropdown-title"><span class="title">CSS预编译器</span> <span class="arrow down"></span></button> <button type="button" aria-label="CSS预编译器" class="mobile-dropdown-title"><span class="title">CSS预编译器</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/cssPrecompile/tailwindcss.html" class="nav-link">
  tailwindcss
</a></li><li class="dropdown-item"><!----> <a href="/blog/cssPrecompile/less.html" class="nav-link">
  Less
</a></li><li class="dropdown-item"><!----> <a href="/blog/cssPrecompile/sass.html" class="nav-link">
  Sass
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/other/git.html" class="nav-link">
  Git常用命令
</a></li><li class="dropdown-item"><!----> <a href="/blog/other/browser.html" class="nav-link">
  浏览器&amp;网络
</a></li></ul></div></div> <a href="https://github.com/Relsola/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript" class="dropdown-title"><span class="title">JavaScript</span> <span class="arrow down"></span></button> <button type="button" aria-label="JavaScript" class="mobile-dropdown-title"><span class="title">JavaScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/JavaScript/base.html" class="nav-link">
  深入理解解JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/blog/JavaScript/es6.html" class="nav-link">
  深入理解ES6
</a></li><li class="dropdown-item"><!----> <a href="/blog/JavaScript/handwrite.html" class="nav-link">
  JavaScript手写系列
</a></li><li class="dropdown-item"><!----> <a href="/blog/JavaScript/designPattern.html" class="nav-link">
  JavaScript设计模式
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue" class="dropdown-title"><span class="title">Vue</span> <span class="arrow down"></span></button> <button type="button" aria-label="Vue" class="mobile-dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/vue/vue2base.html" class="nav-link">
  Vue2基础
</a></li><li class="dropdown-item"><!----> <a href="/blog/vue/libraries.html" class="nav-link">
  Vue核心插件
</a></li><li class="dropdown-item"><!----> <a href="/blog/vue/vue2sourceCode.html" class="nav-link">
  Vue2源码解读
</a></li><li class="dropdown-item"><!----> <a href="/blog/vue/vue3sourceCode.html" class="nav-link">
  Vue3源码解读
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="React" class="dropdown-title"><span class="title">React</span> <span class="arrow down"></span></button> <button type="button" aria-label="React" class="mobile-dropdown-title"><span class="title">React</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/react/base.html" class="nav-link">
  React基础
</a></li><li class="dropdown-item"><!----> <a href="/blog/react/router.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  React路由
</a></li><li class="dropdown-item"><!----> <a href="/blog/react/redux.html" class="nav-link">
  Redux
</a></li><li class="dropdown-item"><!----> <a href="/blog/react/sourceCode.html" class="nav-link">
  React源码
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端工程化" class="dropdown-title"><span class="title">前端工程化</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端工程化" class="mobile-dropdown-title"><span class="title">前端工程化</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/project/webpack.html" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/blog/project/vite.html" class="nav-link">
  Vite
</a></li><li class="dropdown-item"><!----> <a href="/blog/project/rollup.html" class="nav-link">
  Rollup
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="TypeScript" class="dropdown-title"><span class="title">TypeScript</span> <span class="arrow down"></span></button> <button type="button" aria-label="TypeScript" class="mobile-dropdown-title"><span class="title">TypeScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/typescript/base.html" class="nav-link">
  TypeScript基础
</a></li><li class="dropdown-item"><!----> <a href="/blog/typescript/challenge.html" class="nav-link">
  TypeScript类型体操
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="CSS预编译器" class="dropdown-title"><span class="title">CSS预编译器</span> <span class="arrow down"></span></button> <button type="button" aria-label="CSS预编译器" class="mobile-dropdown-title"><span class="title">CSS预编译器</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/cssPrecompile/tailwindcss.html" class="nav-link">
  tailwindcss
</a></li><li class="dropdown-item"><!----> <a href="/blog/cssPrecompile/less.html" class="nav-link">
  Less
</a></li><li class="dropdown-item"><!----> <a href="/blog/cssPrecompile/sass.html" class="nav-link">
  Sass
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/other/git.html" class="nav-link">
  Git常用命令
</a></li><li class="dropdown-item"><!----> <a href="/blog/other/browser.html" class="nav-link">
  浏览器&amp;网络
</a></li></ul></div></div> <a href="https://github.com/Relsola/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>React Router</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/react/router.html#路由的理解" class="sidebar-link">路由的理解</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/react/router.html#spa" class="sidebar-link">SPA</a></li><li class="sidebar-sub-header"><a href="/blog/react/router.html#前端的路由" class="sidebar-link">前端的路由</a></li><li class="sidebar-sub-header"><a href="/blog/react/router.html#前端路由原理" class="sidebar-link">前端路由原理</a></li></ul></li><li><a href="/blog/react/router.html#基本使用" class="sidebar-link">基本使用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/react/router.html#browserrouter" class="sidebar-link">BrowserRouter</a></li><li class="sidebar-sub-header"><a href="/blog/react/router.html#navlink" class="sidebar-link">NavLink</a></li><li class="sidebar-sub-header"><a href="/blog/react/router.html#link" class="sidebar-link">Link</a></li><li class="sidebar-sub-header"><a href="/blog/react/router.html#routes" class="sidebar-link">Routes</a></li><li class="sidebar-sub-header"><a href="/blog/react/router.html#路由顺序" class="sidebar-link">路由顺序</a></li></ul></li><li><a href="/blog/react/router.html#编程式导航" class="sidebar-link">编程式导航</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/react/router.html#navigate" class="sidebar-link">Navigate</a></li><li class="sidebar-sub-header"><a href="/blog/react/router.html#usenavigate" class="sidebar-link">useNavigate</a></li></ul></li><li><a href="/blog/react/router.html#通过路由传递状态" class="sidebar-link">通过路由传递状态</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/react/router.html#link-2" class="sidebar-link">Link</a></li><li class="sidebar-sub-header"><a href="/blog/react/router.html#navigate-2" class="sidebar-link">Navigate</a></li><li class="sidebar-sub-header"><a href="/blog/react/router.html#usenavigate-2" class="sidebar-link">useNavigate</a></li></ul></li><li><a href="/blog/react/router.html#动态路由" class="sidebar-link">动态路由</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/react/router.html#嵌套路由" class="sidebar-link">嵌套路由</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/react/router.html#查询参数" class="sidebar-link">查询参数</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/react/router.html#route-配置" class="sidebar-link">Route 配置</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/react/router.html#browserrouter-与-hashrouter-的区别" class="sidebar-link">BrowserRouter 与 HashRouter 的区别</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="react-router"><a href="#react-router" class="header-anchor">#</a> React Router</h1> <h2 id="路由的理解"><a href="#路由的理解" class="header-anchor">#</a> 路由的理解</h2> <h3 id="spa"><a href="#spa" class="header-anchor">#</a> SPA</h3> <ol><li>单页 Web 应用（single page web application，SPA）</li> <li>整个应用只有<strong>一个完整的页面</strong>。</li> <li>点击页面中的链接<strong>不会刷新</strong>页面，只会做页面的<strong>局部更新。</strong></li> <li>数据都需要通过ajax请求获取, 并在前端异步展现。</li></ol> <h3 id="前端的路由"><a href="#前端的路由" class="header-anchor">#</a> 前端的路由</h3> <ol><li>一个路由就是一个映射关系( <code>key: value</code> )</li> <li>key 为路径, value 可能是 function 或 component</li> <li>浏览器端路由，value 是 component，用于展示页面内容。</li> <li>注册路由: <code>&lt;Route path=&quot;/test&quot; component={Test}&gt;</code></li> <li>工作过程：当浏览器的 path 变为 <code>/test</code> 时, 当前路由组件就会变为 Test 组件</li></ol> <h3 id="前端路由原理"><a href="#前端路由原理" class="header-anchor">#</a> 前端路由原理</h3> <ol><li>直接使用 H5 推出的 history 身上的 API</li> <li>hash 值（锚点） → 兼容性极佳</li></ol> <h2 id="基本使用"><a href="#基本使用" class="header-anchor">#</a> 基本使用</h2> <p>在介绍 React Router 的概念以前，需要先区分两个概念：</p> <ul><li><code>react-router</code>：为 React 应用提供了路由的核心功能；</li> <li><code>react-router-dom</code>：基于 react-router，加入了在浏览器运行环境下的一些功能。</li></ul> <h3 id="browserrouter"><a href="#browserrouter" class="header-anchor">#</a> BrowserRouter</h3> <p>要想在 React 应用中使用 React Router，就需要在 React 项目的根文件（<code>index.tsx</code>）中导入 Router 组件：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> StrictMode <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> ReactDOMClient <span class="token keyword">from</span> <span class="token string">&quot;react-dom/client&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> BrowserRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&quot;./App&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> rootElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOMClient<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>rootElement<span class="token punctuation">)</span><span class="token punctuation">;</span>

root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>StrictMode<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>BrowserRouter<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>BrowserRouter<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>StrictMode<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>在这个文件中，我们导入了 <code>BrowserRouter</code> 组件，然后使用该组件包裹了 <code>App</code> 组件。现在，在这个 <code>BrowserRouter</code> 组件中，来自 <code>react-router-dom</code> 的其他组件和 hooks 就可以正常工作了。</p> <p><code>BrowserRouter</code> 是最常用的路由方式，即浏览器路由。官方文档也建议将 <code>BrowserRouter</code> 组件用于 Web 应用程序。除了这种方式，React Router 还支持其他几种路由方式：</p> <ul><li><code>HashRouter</code>：在路径前加入<code>#</code>成为一个哈希值，Hash 模式的好处是不会因为刷新页面而找不到对应路径；</li> <li><code>MemoryRouter</code>：不存储 history，路由过程保存在内存中，适用于 React Native 这种非浏览器环境；</li> <li><code>NativeRouter</code>：配合 React Native 使用，多用于移动端；</li> <li><code>StaticRouter</code>：主要用于服务端渲染时。</li></ul> <h3 id="navlink"><a href="#navlink" class="header-anchor">#</a> NavLink</h3> <p>在创建导航链接之前，先在<code>App.tsx</code>组件中创建一个标题：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token string">&quot;./styles.css&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;App&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>header<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello World<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>header<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>下面来创建三个导航链接，这些链接会指向<code>App.tsx</code> 中的一些路由。这时就需要导入 <code>NavLink</code> 组件，它是一个导航链接组件，类似于 HTML 中的<code>&lt;a&gt;</code>标签。<code>NavLink</code> 组件使用 <code>to</code> 来指定需要跳转的链接：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> NavLink <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;./styles.css&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;App&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>header<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello World<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>header<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>nav<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>NavLink to<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token operator">&gt;</span>首页<span class="token operator">&lt;</span><span class="token operator">/</span>NavLink<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>NavLink to<span class="token operator">=</span><span class="token string">&quot;product&quot;</span><span class="token operator">&gt;</span>产品<span class="token operator">&lt;</span><span class="token operator">/</span>NavLink<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>NavLink to<span class="token operator">=</span><span class="token string">&quot;about&quot;</span><span class="token operator">&gt;</span>关于<span class="token operator">&lt;</span><span class="token operator">/</span>NavLink<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>nav<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>NavLink</code> 是存在 <code>active</code> 状态的，所以可以为<code>active</code> 状态和非<code>active</code> 状态的导航链接添加样式：</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.nav-active</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
  <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>接下来为导航链接添加样式判断条件，选择性的为其添加<code>nav-active</code>类：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> NavLink <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;./styles.css&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;App&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>header<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello World<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>header<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>nav<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>NavLink
    			to<span class="token operator">=</span><span class="token string">&quot;&quot;</span>
          className<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> isActive <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> isActive <span class="token operator">?</span> <span class="token string">&quot;nav-active&quot;</span> <span class="token operator">:</span> <span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">}</span>
        <span class="token operator">&gt;</span>
          首页
        <span class="token operator">&lt;</span><span class="token operator">/</span>NavLink<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>NavLink to<span class="token operator">=</span><span class="token string">&quot;product&quot;</span><span class="token operator">&gt;</span>产品<span class="token operator">&lt;</span><span class="token operator">/</span>NavLink<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>NavLink to<span class="token operator">=</span><span class="token string">&quot;about&quot;</span><span class="token operator">&gt;</span>关于<span class="token operator">&lt;</span><span class="token operator">/</span>NavLink<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>nav<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="link"><a href="#link" class="header-anchor">#</a> Link</h3> <p>在 <code>react-router-dom</code> 中，可以使用 <code>Link</code> 组件来创建常规链接。<code>Link</code> 组件与 <code>NavLink</code> 组件非常相似，唯一的区别就是 <code>NavLink</code> 存在 <code>active</code> 状态，而 <code>Link</code> 没有。</p> <p><code>Link</code> 组件和 <code>NavLink</code> 组件的使用方式类似，例如在产品页面有一个返回首页的按钮，需要传递给 <code>to</code> 需要跳转的路径：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Link <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;./styles.css&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Product</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;product&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>header<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">&quot;/&quot;</span><span class="token operator">&gt;</span>返回首页<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>header<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>如果需要对 <code>Link</code> 进行更多控制，也可以传递给 <code>to</code> 一个对象，在这个对象中，可以通过 search 属性来添加查询字符串或通过 <code>hash</code> 属性来传递 <code>hash</code>值，例如：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Link <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;./styles.css&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Settings</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;settings&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>header<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello World<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Link
          to<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
            <span class="token literal-property property">pathname</span><span class="token operator">:</span> <span class="token string">&quot;/settings&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">search</span><span class="token operator">:</span> <span class="token string">&quot;?sort=date&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">hash</span><span class="token operator">:</span> <span class="token string">&quot;#hash&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token operator">&gt;</span>
          设置
        <span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>header<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>点击“<strong>设置</strong>”时，路由就变成了：<code>/settings?sort=date#hash</code></p> <h3 id="routes"><a href="#routes" class="header-anchor">#</a> Routes</h3> <p>下面来看看如何将路由映射为对应的页面（组件）。首先需要从 react-router-dom 中导入一个名为 <code>Routes</code> 的组件，它将包含可以在页面特定部分显示的所有不同的路由。</p> <p>在 <code>index.tsx</code> 中进行如下修改：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> NavLink<span class="token punctuation">,</span> Routes<span class="token punctuation">,</span> Route <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Product <span class="token keyword">from</span> <span class="token string">&quot;./Product&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;./styles.css&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;App&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>header<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello World<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>header<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>nav<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>NavLink to<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token operator">&gt;</span>首页<span class="token operator">&lt;</span><span class="token operator">/</span>NavLink<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>NavLink to<span class="token operator">=</span><span class="token string">&quot;product&quot;</span><span class="token operator">&gt;</span>产品<span class="token operator">&lt;</span><span class="token operator">/</span>NavLink<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>NavLink to<span class="token operator">=</span><span class="token string">&quot;about&quot;</span><span class="token operator">&gt;</span>关于<span class="token operator">&lt;</span><span class="token operator">/</span>NavLink<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>nav<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Routes<span class="token operator">&gt;</span>
    
      <span class="token operator">&lt;</span><span class="token operator">/</span>Routes<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>我们需要在 <code>Routes</code> 组件中使用 <code>Route</code> 组件来定义所有路由。该组件接受两个 <code>props</code>：</p> <ul><li><code>path</code>：页面 URL 应导航到的路径，类似于 NavLink 组件的 to；</li> <li><code>element</code>：页面导航到该路由时加载的元素。</li></ul> <p><code>Route</code> 组件用于将应用的位置映射到不同的 React 组件。例如，当用户导航到 <code>/product</code> 路径时呈现 <code>Product</code> 组件，可以这样来写：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> NavLink<span class="token punctuation">,</span> Routes<span class="token punctuation">,</span> Route <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Product <span class="token keyword">from</span> <span class="token string">&quot;./Product&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> About <span class="token keyword">from</span> <span class="token string">&quot;./About&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">&quot;./Home&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Error <span class="token keyword">from</span> <span class="token string">&quot;./Error&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;./styles.css&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;App&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>header<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello World<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>header<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>nav<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>NavLink to<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token operator">&gt;</span>首页<span class="token operator">&lt;</span><span class="token operator">/</span>NavLink<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>NavLink to<span class="token operator">=</span><span class="token string">&quot;product&quot;</span><span class="token operator">&gt;</span>产品<span class="token operator">&lt;</span><span class="token operator">/</span>NavLink<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>NavLink to<span class="token operator">=</span><span class="token string">&quot;about&quot;</span><span class="token operator">&gt;</span>关于<span class="token operator">&lt;</span><span class="token operator">/</span>NavLink<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>nav<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Routes<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Home <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/product&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Product <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/about&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>About <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;*&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Error <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Routes<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>当点击“<strong>产品</strong>”时，就会加载 <code>Product</code> 组件，当点击“<strong>首页</strong>”时，就会加载 <code>Home</code> 组件，当在地址栏输入一个没有定义的路由时，就会加载 <code>Error</code> 组件。</p> <p>从上面的代码中可以看到，如果想要在所有 <code>Route</code> 都不匹配时就渲染 404 页面，只需将 404 页面对应的 <code>Route</code> 的 <code>path</code> 设置为 <code>*</code>：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Routes<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Home <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;product&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Product <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;about&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>About <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;*&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Error <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Routes<span class="token operator">&gt;</span>
</code></pre></div><h3 id="路由顺序"><a href="#路由顺序" class="header-anchor">#</a> 路由顺序</h3> <p>在 React Router v6 以前，我们必须按照一定的顺序来定义路由，以获得准确的渲染。在 v6 及之后的版本中，路由定义的顺序无关紧要。</p> <p>以下代码在 v5 中，<code>/product/new</code>将匹配到第一个路由并渲染 <code>Product</code> 组件：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Switch<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/product/:id&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Product<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/product/new&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>NewProduct<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Switch<span class="token operator">&gt;</span>
</code></pre></div><p>而在 v6 中，将 <code>&lt;Switch&gt;</code> 组件替换为了 <code>&lt;Routes&gt;</code> 组件。<code>/products/new</code>将匹配这两个路由，但只会渲染<code>NewProduct</code>组件，因为它是更具体的匹配：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Routes<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/product/:id&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Product <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/product/new&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>NewProduct <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Routes<span class="token operator">&gt;</span>
</code></pre></div><h2 id="编程式导航"><a href="#编程式导航" class="header-anchor">#</a> 编程式导航</h2> <p>React Router 提供了两种不同的编程式导航方式：</p> <ul><li><strong>声明式导航组件</strong>：<code>&lt;Navigate&gt;</code> 组件</li> <li><strong>命令式导航方法</strong>：<code>useNavigate</code> Hook</li></ul> <p>我们可以使用这两种编程的方式来跳转到指定的路由，也可以实现路由的重定向，比如在浏览器的地址栏输入一个 URL 并进行跳转时，如果应用中没有定义该路由，就跳转到应用的首页。</p> <h3 id="navigate"><a href="#navigate" class="header-anchor">#</a> Navigate</h3> <p><code>&lt;Navigate&gt;</code>组件是一种声明式的导航方式。使用 <code>Navigate</code> 组件时，首先需要从 react-router-dom 导入 <code>Navigate</code> 组件。然后在 <code>Navigate</code> 组件中通过 <code>to</code> props 来指定要跳转的路径：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> NavLink<span class="token punctuation">,</span> Routes<span class="token punctuation">,</span> Route<span class="token punctuation">,</span> Navigate <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Product <span class="token keyword">from</span> <span class="token string">&quot;./Product&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> About <span class="token keyword">from</span> <span class="token string">&quot;./About&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">&quot;./Home&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;./styles.css&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;App&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>header<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello World<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>header<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>nav<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>NavLink to<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token operator">&gt;</span>首页<span class="token operator">&lt;</span><span class="token operator">/</span>NavLink<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>NavLink to<span class="token operator">=</span><span class="token string">&quot;product&quot;</span><span class="token operator">&gt;</span>产品<span class="token operator">&lt;</span><span class="token operator">/</span>NavLink<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>NavLink to<span class="token operator">=</span><span class="token string">&quot;about&quot;</span><span class="token operator">&gt;</span>关于<span class="token operator">&lt;</span><span class="token operator">/</span>NavLink<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>nav<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Routes<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Home <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;product&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Product <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;about&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>About <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;*&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Navigate to<span class="token operator">=</span><span class="token string">&quot;/&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Routes<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这样，当在浏览器地址栏输入一个未定义的路由时，就会要转到首页。</p> <h3 id="usenavigate"><a href="#usenavigate" class="header-anchor">#</a> useNavigate</h3> <p><code>useNavigate</code> Hook是一种命令式导航方式。使用这个 Hook 时，首先需要从 react-router-dom 中导入 <code>useNavigate</code>，然后传递给它需要跳转的路由即可。假如在提交完表单之后，跳转到主页，可以这样实现：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useNavigate <span class="token punctuation">}</span> <span class="token keyword">from</span> 'react<span class="token operator">-</span>router<span class="token operator">-</span>dom

<span class="token keyword">function</span> <span class="token function">Register</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> navigate <span class="token operator">=</span> <span class="token function">useNavigate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Form afterSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">navigate</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="通过路由传递状态"><a href="#通过路由传递状态" class="header-anchor">#</a> 通过路由传递状态</h2> <p>在 react-router-dom 中可以通过以下三种方式来传递状态：</p> <ul><li>使用 <code>Link</code> 组件</li> <li>使用 <code>Navigate</code> 组件</li> <li>使用 <code>useNavigate</code> 钩子</li></ul> <h3 id="link-2"><a href="#link-2" class="header-anchor">#</a> Link</h3> <p>下面来使用 Link 组件通过 <code>state</code> props 来将数据从产品页面传递到主页：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Link <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">Contact</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>header<span class="token operator">&gt;</span>产品页面<span class="token operator">&lt;</span><span class="token operator">/</span>header<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">&quot;/&quot;</span> state<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;From Product&quot;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        返回
      <span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> Contact<span class="token punctuation">;</span>
</code></pre></div><p>现在我们就将需要的数据传递出来了，那该如何在首页获取从产品页面传递出来的数据呢？可以在接收信息的页面（首页）中使用一个名为 <code>useLocation</code> 的钩子来获取数据：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useLocation <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;./styles.css&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Settings</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> location <span class="token operator">=</span> <span class="token function">useLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;App&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>header<span class="token operator">&gt;</span>首页<span class="token operator">&lt;</span><span class="token operator">/</span>header<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>location<span class="token punctuation">.</span>state<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>当在产品页面点击返回时，就会跳转到首页，并且首页显示了从产品页面传递出来的数据</p> <h3 id="navigate-2"><a href="#navigate-2" class="header-anchor">#</a> Navigate</h3> <p><code>Navigate</code> 组件也可以在 react-router-dom 中传递状态，其使用方式和 <code>Link</code> 组件类似。假如当点击关于按钮时，跳转到首页，并告诉首页该跳转是从哪个页面来的：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/about&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Navigate to<span class="token operator">=</span><span class="token string">&quot;/&quot;</span> state<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;From About&quot;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div><p>在首页中仍然是使用 <code>useLocation</code> 钩子来获取状态值：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useLocation <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;./styles.css&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Settings</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> location <span class="token operator">=</span> <span class="token function">useLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;App&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>header<span class="token operator">&gt;</span>首页<span class="token operator">&lt;</span><span class="token operator">/</span>header<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>location<span class="token punctuation">.</span>state<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>当在首页点击“<strong>关于</strong>”时，就会重定向到首页，并且首页中会显示 From About</p> <h3 id="usenavigate-2"><a href="#usenavigate-2" class="header-anchor">#</a> useNavigate</h3> <p>在调用 <code>navigate()</code> 函数时，给它传递了一个参数，即要重定向的路径。实际上，<code>navigate()</code> 函数接受两个参数，第一个参数就是跳转的路径，第二个参数是包含状态的对象。可以借助 <code>useNavigate</code> Hook 来实现状态传递：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useNavigate <span class="token punctuation">}</span> <span class="token keyword">from</span> 'react<span class="token operator">-</span>router<span class="token operator">-</span>dom

<span class="token keyword">function</span> <span class="token function">Register</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> navigate <span class="token operator">=</span> <span class="token function">useNavigate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Form afterSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">navigate</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token string">&quot;From the About Page&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在首页中仍然是使用 <code>useLocation</code> 钩子来获取状态值，和上面两种方式一样。</p> <h2 id="动态路由"><a href="#动态路由" class="header-anchor">#</a> 动态路由</h2> <p>一个很常见的场景，在维基百科进行搜索时，URL 的模式始终是一样的，如下：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token literal-property property">https</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>zh<span class="token punctuation">.</span>wikipedia<span class="token punctuation">.</span>org<span class="token operator">/</span>wiki<span class="token operator">/</span><span class="token punctuation">{</span>keyword<span class="token punctuation">}</span>
</code></pre></div><p>这里的 <code>keyword</code> 就是我们在维基百科中搜索的内容，这个内容是不固定的，并且有很多很多，我们不可能为每个关键词都创建一个路由。其实，只需要声明一个带有 <code>keyword</code> 占位符的路由即可。对于上面的例子，只需要将 <code>Route</code> 组件的 <code>path</code> props 声明为这样：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/wiki/:keyword&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Wiki <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div><p>这时，无论是访问<code>/wiki/javascript</code>还是<code>/wiki/react</code>，都会加载 <code>Wiki</code> 组件。</p> <p>那我们该如何在组件中访问 URL 中的动态部分呢？从 v5.1 开始，React Router 就提供了一个 <code>useParams</code> Hook，它返回一个对象，该对象具有 URL 参数及其值之间的映射。使用方式如下：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>useParams<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">Wiki</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> keyword <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span> keyword <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这样，通过获取到的 URL 参数，就可以请求页面对应的数据。</p> <h2 id="嵌套路由"><a href="#嵌套路由" class="header-anchor">#</a> 嵌套路由</h2> <p>嵌套路由允许父路由充当包装器并控制子路由的渲染。比如，在应用中点击消息时，会跳转到 <code>/messages</code> 路由，并显示所有的通知列表。当点击某一条消息时，就会跳转到 <code>/messages/:id</code> 路由，这时就能看到指定 <code>id</code> 的消息详情，同时消息列表是显示在左侧的。这个场景就要依赖嵌套路由来实现。下面来看看如何使用 React Router 实现这种嵌套路由模式。</p> <p>从最基础的结构开始定义：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Routes<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Home <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/messages&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Messages <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/settings&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Settings <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Routes<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>现在，我们希望 <code>Messages</code> 能够控制渲染子路由，那能不能直接在 <code>Messages</code> 组件中来定义子路由呢？就像这样：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Messages</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Conversations <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Routes<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;:id&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>MessagesDetails <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Routes<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>现在，当用户导航到 <code>/messages</code> 时， React Router 会呈现 <code>Messages</code> 组件。<code>Messages</code> 组件中通过 <code>Conversations</code> 组件来显示消息列表，然后使用将 <code>/messages/:id</code> 映射到 <code>Chat</code> 组件的 <code>Route</code> 来渲染另一个 <code>Routes</code>。</p> <blockquote><p><strong>注意：</strong> 这里不必在嵌套路由中包含完整的 <code>/messages/:id</code> 路径，因为 <code>Routes</code> 是很智能的，当省略了前导 <code>/</code>，就会认为这条路径是相对于父级 <code>/messages</code> 的。</p></blockquote> <p>这样，只有在跳转到<code>/Messages</code>时才会渲染消息列表。当访问与 <code>/messages/:id</code> 模式匹配的路由时，消息列表就消失了，嵌套路由永远不被会渲染。</p> <p>为了解决这个问题，我们需要告诉 React Router 想要在路由为 <code>/messages</code> 时或者为任何其他匹配 <code>/messages/*</code> 模式的路由时要渲染消息列表。</p> <p>那如果只是将路径修改为 <code>/messages/*</code>会怎样呢？</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Routes<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Home <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/messages/*&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Messages <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/settings&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Settings <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Routes<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这样做的确生效了，无论是导航到 <code>/messages</code> 还是 <code>/messages/:id</code>，都能正常加载消息列表组件。</p> <p>通过将 <code>/*</code> 附加到 <code>/messages</code> 路径的末尾，实际上是在告诉 React Router，<code>Messages</code> 有一个嵌套的 <code>Routes</code> 组件。并且父路径应该匹配 <code>/messages</code> 以及与 <code>/messages/*</code> 匹配的任何其他路由。</p> <p>当我们希望在子 <code>Route</code> 控制渲染嵌套路由时，这是有效的。但是如果我们希望在 App 组件包含创建嵌套路由所需的所有信息，而不是必须在 <code>Messages</code> 组件中定义呢？React Router 也是支持这种创建嵌套路由的方式：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Routes<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Home <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/messages&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Messages <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;:id&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>MessagesDetails <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/settings&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Settings <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Routes<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这里以声明式的方式将子 <code>Route</code> 嵌套为父 <code>Route</code> 的子级。和上面一样，子路由是相对于父路由的，因此不需要包含父 (<code>/messages</code>) 路径。</p> <p>现在，只需要告诉 React Router 应该在父路由（<code>Messges</code>）中的哪个位置渲染子路由（<code>MessagesDetails</code>）。这就就需要使用 React Router 的 <code>Outlet</code> 组件：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Outlet <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">Messages</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Conversations <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Outlet <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>如果应用的路由与嵌套 <code>Route</code> 的路径匹配，<code>Outlet</code> 组件就会渲染 <code>Route</code> 的元素。 根据上面的 <code>Routes</code>，如果在当前的路由是 <code>/messages</code>，<code>Outlet</code> 组件将渲染为 <code>null</code>；如果当前的路由是 <code>/messages/1</code>，<code>Outlet</code> 组件将渲染 <code>&lt;MessagesDetails /&gt;</code> 组件。</p> <h2 id="查询参数"><a href="#查询参数" class="header-anchor">#</a> 查询参数</h2> <p>在 React Router 中，如何从 URL 中获取参数呢？例如以下 URL：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>twitter<span class="token punctuation">.</span>com<span class="token operator">/</span>search<span class="token operator">?</span>q<span class="token operator">=</span>react<span class="token operator">&amp;</span>src<span class="token operator">=</span>typed_query<span class="token operator">&amp;</span>f<span class="token operator">=</span>live
</code></pre></div><p>从 v6 开始，React Router 使用 <code>URLSearchParams</code> API 来处理查询字符串，<code>URLSearchParams</code> 内置于所有浏览器（IE 除外）中，并提供了处理查询字符串的实用方法。当创建 <code>URLSearchParams</code> 实例时，需要向它传递一个查询字符串：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> queryString <span class="token operator">=</span> <span class="token string">&quot;?q=react&amp;src=typed_query&amp;f=live&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> sp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span>queryString<span class="token punctuation">)</span><span class="token punctuation">;</span>

sp<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token string">&quot;q&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
sp<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;q&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// react</span>
sp<span class="token punctuation">.</span><span class="token function">getAll</span><span class="token punctuation">(</span><span class="token string">&quot;src&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;typed_query&quot;]</span>
sp<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;nope&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// null</span>

sp<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;sort&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ascending&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
sp<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;?q=react&amp;src=typed_query&amp;f=live&amp;sort=ascending&quot;</span>

sp<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;q&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;bytes.dev&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
sp<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;?q=bytes.dev&amp;src=typed_query&amp;f=live&amp;sort=ascending&quot;</span>

sp<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">&quot;sort&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
sp<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;?q=bytes.dev&amp;src=typed_query&amp;f=live&quot;</span>
</code></pre></div><p>React Router 提供了一个自定义的 <code>useSearchParams</code> Hook，它是基于 <code>URLSearchParams</code> 进行的封装。<code>useSearchParams</code> 返回一个数组，该数组第一个元素是 <code>URLSearchParams</code> 的实例，第二个元素是更新查询参数的一个方法。</p> <p>对于上面的 URL，使用 <code>useSearchParams</code> 从查询字符串中获取值：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useSearchParams <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span>

<span class="token keyword">const</span> <span class="token function-variable function">Results</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>searchParams<span class="token punctuation">,</span> setSearchParams<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useSearchParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> q <span class="token operator">=</span> searchParams<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'q'</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> src <span class="token operator">=</span> searchParams<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'src'</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> f <span class="token operator">=</span> searchParams<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'f'</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>如果需要更新查询字符串，可以使用 <code>setSearchParams</code>，向它传递一个对象，该对象的<code>key/value</code> 对将作为 <code>&amp;key=value</code> 添加到 url：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">Results</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>searchParams<span class="token punctuation">,</span> setSearchParams<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useSearchParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> q <span class="token operator">=</span> searchParams<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'q'</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> src <span class="token operator">=</span> searchParams<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'src'</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> f <span class="token operator">=</span> searchParams<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'f'</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> <span class="token function-variable function">updateOrder</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">sort</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setSearchParams</span><span class="token punctuation">(</span><span class="token punctuation">{</span> sort <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">...</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="route-配置"><a href="#route-配置" class="header-anchor">#</a> Route 配置</h2> <p>React Router v6 内置了一个 <code>useRoutes</code> Hook，它在功能上等同于 <code>&lt;Routes&gt;</code>，但它是使用 JavaScript 对象而不是 <code>&lt;Route&gt;</code> 元素来定义路由。这个对象具有与普通 <code>&lt;Route&gt;</code> 元素相同的属性，但它们不需要使用 JSX 来编写。</p> <p><code>useRoutes</code> 的返回值要么是一个有效的 React 元素（可以使用它来渲染路由树），如果没有匹配项，则返回 <code>null</code>。</p> <p>假如应用中有以下路径：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//invoices</span>
  <span class="token operator">:</span>id
  pending
  complete
</code></pre></div><p>使用 <code>&lt;Route&gt;</code> 组件来定义路由将会是这样的：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Navbar <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Routes<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Home <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/invoices&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Invoices <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;:id&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Invoice <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;pending&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Pending <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;complete&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Complete <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Routes<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>而 <strong>useRoutes</strong> 是利用 JavaScript 对象完成的，而不是使用 React 元素 (JSX) 来声明路由。定义形式如下：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useRoutes <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token function">useRoutes</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Home <span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;/invoices&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Invoices <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;:id&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Invoice <span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;/pending&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Pending <span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;/complete&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Complete <span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Navbar <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token punctuation">{</span>routes<span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="browserrouter-与-hashrouter-的区别"><a href="#browserrouter-与-hashrouter-的区别" class="header-anchor">#</a> BrowserRouter 与 HashRouter 的区别</h2> <ol><li>底层原理不一样
<ol><li>BrowserRouter 使用的是 H5 的 history API，不兼容 IE9 及以下版本。</li> <li>HashRouter 使用的是 URL 的哈希值。</li></ol></li> <li>path 表现形式不一样
<ol><li>BrowserRouter 的路径中没有#,例如：<code>localhost:3000/demo/test</code></li> <li>HashRouter 的路径包含#,例如：<code>localhost:3000/#/demo/test</code></li></ol></li> <li>刷新后对路由state参数的影响
<ol><li>BrowserRouter 没有任何影响，因为 state 保存在 history 对象中。</li> <li>HashRouter 刷新后会导致路由 state 参数的丢失。</li></ol></li> <li>HashRouter 可以用于解决一些路径错误相关的问题。</li></ol></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.9d83514e.js" defer></script><script src="/blog/assets/js/3.2bfcb39e.js" defer></script><script src="/blog/assets/js/2.f8d1e681.js" defer></script><script src="/blog/assets/js/40.6de3452b.js" defer></script>
  </body>
</html>
